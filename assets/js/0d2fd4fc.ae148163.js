"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[2162],{8453:(e,n,l)=>{l.d(n,{R:()=>d,x:()=>c});var s=l(6540);const r={},i=s.createContext(r);function d(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(i.Provider,{value:n},e.children)}},8922:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"devops/cloudflare","title":"Cloudflare \u5b8c\u5168\u6307\u5357","description":"Cloudflare \u662f\u5168\u7403\u9886\u5148\u7684\u7f51\u7edc\u5b89\u5168\u548c\u6027\u80fd\u4f18\u5316\u5e73\u53f0\uff0c\u63d0\u4f9b\u514d\u8d39\u7684 CDN\u3001DNS\u3001DDoS \u9632\u62a4\u7b49\u670d\u52a1\uff0c\u662f\u5f00\u53d1\u8005\u548c\u7ad9\u957f\u7684\u5fc5\u5907\u5de5\u5177\u3002","source":"@site/docs/tutorial/devops/cloudflare.md","sourceDirName":"devops","slug":"/devops/cloudflare","permalink":"/docs/tutorial/devops/cloudflare","draft":false,"unlisted":false,"editUrl":"https://github.com/beisi-tech/docs/tree/main/my-website/docs/tutorial/devops/cloudflare.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_label":"Cloudflare","sidebar_position":7,"slug":"cloudflare"},"sidebar":"tutorialSidebar","previous":{"title":"\u963f\u91cc\u4e91 CDN","permalink":"/docs/tutorial/devops/aliyun-cdn"},"next":{"title":"Go \u73af\u5883\u5b89\u88c5","permalink":"/docs/tutorial/devops/go-install"}}');var r=l(4848),i=l(8453);const d={sidebar_label:"Cloudflare",sidebar_position:7,slug:"cloudflare"},c="Cloudflare \u5b8c\u5168\u6307\u5357",a={},o=[{value:"Cloudflare \u7b80\u4ecb",id:"cloudflare-\u7b80\u4ecb",level:2},{value:"\u6838\u5fc3\u670d\u52a1",id:"\u6838\u5fc3\u670d\u52a1",level:3},{value:"\u4e3a\u4ec0\u4e48\u9009\u62e9 Cloudflare",id:"\u4e3a\u4ec0\u4e48\u9009\u62e9-cloudflare",level:3},{value:"\u8d26\u53f7\u6ce8\u518c\u4e0e\u57df\u540d\u6258\u7ba1",id:"\u8d26\u53f7\u6ce8\u518c\u4e0e\u57df\u540d\u6258\u7ba1",level:2},{value:"\u6ce8\u518c\u8d26\u53f7",id:"\u6ce8\u518c\u8d26\u53f7",level:3},{value:"\u6dfb\u52a0\u57df\u540d",id:"\u6dfb\u52a0\u57df\u540d",level:3},{value:"\u66f4\u6362 DNS \u670d\u52a1\u5668",id:"\u66f4\u6362-dns-\u670d\u52a1\u5668",level:3},{value:"\u5e38\u89c1\u57df\u540d\u6ce8\u518c\u5546\u64cd\u4f5c",id:"\u5e38\u89c1\u57df\u540d\u6ce8\u518c\u5546\u64cd\u4f5c",level:4},{value:"DNS \u89e3\u6790\u914d\u7f6e",id:"dns-\u89e3\u6790\u914d\u7f6e",level:2},{value:"\u6dfb\u52a0 DNS \u8bb0\u5f55",id:"\u6dfb\u52a0-dns-\u8bb0\u5f55",level:3},{value:"\u5e38\u7528\u8bb0\u5f55\u7c7b\u578b",id:"\u5e38\u7528\u8bb0\u5f55\u7c7b\u578b",level:4},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b",level:4},{value:"\u4ee3\u7406\u6a21\u5f0f\u8bf4\u660e",id:"\u4ee3\u7406\u6a21\u5f0f\u8bf4\u660e",level:3},{value:"SSL/TLS \u914d\u7f6e",id:"ssltls-\u914d\u7f6e",level:2},{value:"\u52a0\u5bc6\u6a21\u5f0f",id:"\u52a0\u5bc6\u6a21\u5f0f",level:3},{value:"\u83b7\u53d6\u6e90\u7ad9\u8bc1\u4e66",id:"\u83b7\u53d6\u6e90\u7ad9\u8bc1\u4e66",level:3},{value:"Nginx \u914d\u7f6e",id:"nginx-\u914d\u7f6e",level:4},{value:"Edge Certificates",id:"edge-certificates",level:3},{value:"\u514d\u8d39 CDN \u914d\u7f6e",id:"\u514d\u8d39-cdn-\u914d\u7f6e",level:2},{value:"\u7f13\u5b58\u914d\u7f6e",id:"\u7f13\u5b58\u914d\u7f6e",level:3},{value:"\u7f13\u5b58\u89c4\u5219",id:"\u7f13\u5b58\u89c4\u5219",level:3},{value:"\u521b\u5efa\u7f13\u5b58\u89c4\u5219\u793a\u4f8b",id:"\u521b\u5efa\u7f13\u5b58\u89c4\u5219\u793a\u4f8b",level:4},{value:"\u6e05\u9664\u7f13\u5b58",id:"\u6e05\u9664\u7f13\u5b58",level:3},{value:"\u9875\u9762\u89c4\u5219\uff08Page Rules\uff09",id:"\u9875\u9762\u89c4\u5219page-rules",level:3},{value:"Cloudflare Pages",id:"cloudflare-pages",level:2},{value:"\u7279\u6027",id:"\u7279\u6027",level:3},{value:"\u521b\u5efa Pages \u9879\u76ee",id:"\u521b\u5efa-pages-\u9879\u76ee",level:3},{value:"\u65b9\u5f0f 1: \u8fde\u63a5 Git \u4ed3\u5e93",id:"\u65b9\u5f0f-1-\u8fde\u63a5-git-\u4ed3\u5e93",level:4},{value:"\u65b9\u5f0f 2: \u76f4\u63a5\u4e0a\u4f20",id:"\u65b9\u5f0f-2-\u76f4\u63a5\u4e0a\u4f20",level:4},{value:"\u73af\u5883\u53d8\u91cf",id:"\u73af\u5883\u53d8\u91cf",level:3},{value:"\u81ea\u5b9a\u4e49\u57df\u540d",id:"\u81ea\u5b9a\u4e49\u57df\u540d",level:3},{value:"\u91cd\u5b9a\u5411\u548c Headers",id:"\u91cd\u5b9a\u5411\u548c-headers",level:3},{value:"<code>_redirects</code> \u6587\u4ef6",id:"_redirects-\u6587\u4ef6",level:4},{value:"<code>_headers</code> \u6587\u4ef6",id:"_headers-\u6587\u4ef6",level:4},{value:"Functions\uff08\u8fb9\u7f18\u51fd\u6570\uff09",id:"functions\u8fb9\u7f18\u51fd\u6570",level:3},{value:"Cloudflare Workers",id:"cloudflare-workers",level:2},{value:"\u514d\u8d39\u989d\u5ea6",id:"\u514d\u8d39\u989d\u5ea6",level:3},{value:"\u521b\u5efa Worker",id:"\u521b\u5efa-worker",level:3},{value:"\u65b9\u5f0f 1: Dashboard \u521b\u5efa",id:"\u65b9\u5f0f-1-dashboard-\u521b\u5efa",level:4},{value:"\u65b9\u5f0f 2: Wrangler CLI",id:"\u65b9\u5f0f-2-wrangler-cli",level:4},{value:"Worker \u793a\u4f8b",id:"worker-\u793a\u4f8b",level:3},{value:"\u57fa\u7840 Hello World",id:"\u57fa\u7840-hello-world",level:4},{value:"\u8bf7\u6c42\u8def\u7531",id:"\u8bf7\u6c42\u8def\u7531",level:4},{value:"\u53cd\u5411\u4ee3\u7406",id:"\u53cd\u5411\u4ee3\u7406",level:4},{value:"CORS \u4ee3\u7406",id:"cors-\u4ee3\u7406",level:4},{value:"\u8bbf\u95ee\u7edf\u8ba1",id:"\u8bbf\u95ee\u7edf\u8ba1",level:4},{value:"Workers KV",id:"workers-kv",level:3},{value:"\u81ea\u5b9a\u4e49\u57df\u540d",id:"\u81ea\u5b9a\u4e49\u57df\u540d-1",level:3},{value:"\u90ae\u4ef6\u8def\u7531 (Email Routing)",id:"\u90ae\u4ef6\u8def\u7531-email-routing",level:2},{value:"\u5f00\u542f\u90ae\u4ef6\u8def\u7531",id:"\u5f00\u542f\u90ae\u4ef6\u8def\u7531",level:3},{value:"\u914d\u7f6e\u8f6c\u53d1\u89c4\u5219",id:"\u914d\u7f6e\u8f6c\u53d1\u89c4\u5219",level:3},{value:"\u76ee\u6807\u90ae\u7bb1\u9a8c\u8bc1",id:"\u76ee\u6807\u90ae\u7bb1\u9a8c\u8bc1",level:3},{value:"\u81ea\u5b9a\u4e49 MX \u8bb0\u5f55",id:"\u81ea\u5b9a\u4e49-mx-\u8bb0\u5f55",level:3},{value:"Email Workers",id:"email-workers",level:3},{value:"\u5b89\u5168\u914d\u7f6e",id:"\u5b89\u5168\u914d\u7f6e",level:2},{value:"WAF \u89c4\u5219",id:"waf-\u89c4\u5219",level:3},{value:"Bot \u7ba1\u7406",id:"bot-\u7ba1\u7406",level:3},{value:"IP \u8bbf\u95ee\u89c4\u5219",id:"ip-\u8bbf\u95ee\u89c4\u5219",level:3},{value:"\u9a8c\u8bc1\u7801 (Challenge)",id:"\u9a8c\u8bc1\u7801-challenge",level:3},{value:"Cloudflare Tunnel",id:"cloudflare-tunnel",level:2},{value:"\u5b89\u88c5 cloudflared",id:"\u5b89\u88c5-cloudflared",level:3},{value:"\u521b\u5efa Tunnel",id:"\u521b\u5efa-tunnel",level:3},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u8fd0\u884c Tunnel",id:"\u8fd0\u884c-tunnel",level:3},{value:"R2 \u5bf9\u8c61\u5b58\u50a8",id:"r2-\u5bf9\u8c61\u5b58\u50a8",level:2},{value:"\u521b\u5efa\u5b58\u50a8\u6876",id:"\u521b\u5efa\u5b58\u50a8\u6876",level:3},{value:"\u4f7f\u7528 S3 API",id:"\u4f7f\u7528-s3-api",level:3},{value:"\u5728 Worker \u4e2d\u4f7f\u7528 R2",id:"\u5728-worker-\u4e2d\u4f7f\u7528-r2",level:3},{value:"\u5e38\u7528\u6280\u5de7",id:"\u5e38\u7528\u6280\u5de7",level:2},{value:"1. \u5f00\u53d1\u6a21\u5f0f",id:"1-\u5f00\u53d1\u6a21\u5f0f",level:3},{value:"2. \u6682\u505c Cloudflare",id:"2-\u6682\u505c-cloudflare",level:3},{value:"3. IP \u5730\u7406\u4f4d\u7f6e",id:"3-ip-\u5730\u7406\u4f4d\u7f6e",level:3},{value:"4. \u771f\u5b9e IP \u83b7\u53d6",id:"4-\u771f\u5b9e-ip-\u83b7\u53d6",level:3},{value:"5. \u4ec5\u5141\u8bb8 Cloudflare IP",id:"5-\u4ec5\u5141\u8bb8-cloudflare-ip",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"1. \u65e0\u9650\u91cd\u5b9a\u5411",id:"1-\u65e0\u9650\u91cd\u5b9a\u5411",level:3},{value:"2. \u6e90\u7ad9 IP \u6cc4\u9732",id:"2-\u6e90\u7ad9-ip-\u6cc4\u9732",level:3},{value:"3. \u7f13\u5b58\u4e0d\u66f4\u65b0",id:"3-\u7f13\u5b58\u4e0d\u66f4\u65b0",level:3},{value:"4. Workers \u8d85\u65f6",id:"4-workers-\u8d85\u65f6",level:3},{value:"5. \u90ae\u4ef6\u65e0\u6cd5\u63a5\u6536",id:"5-\u90ae\u4ef6\u65e0\u6cd5\u63a5\u6536",level:3},{value:"\u53c2\u8003\u8d44\u6e90",id:"\u53c2\u8003\u8d44\u6e90",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cloudflare-\u5b8c\u5168\u6307\u5357",children:"Cloudflare \u5b8c\u5168\u6307\u5357"})}),"\n",(0,r.jsx)(n.p,{children:"Cloudflare \u662f\u5168\u7403\u9886\u5148\u7684\u7f51\u7edc\u5b89\u5168\u548c\u6027\u80fd\u4f18\u5316\u5e73\u53f0\uff0c\u63d0\u4f9b\u514d\u8d39\u7684 CDN\u3001DNS\u3001DDoS \u9632\u62a4\u7b49\u670d\u52a1\uff0c\u662f\u5f00\u53d1\u8005\u548c\u7ad9\u957f\u7684\u5fc5\u5907\u5de5\u5177\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"cloudflare-\u7b80\u4ecb",children:"Cloudflare \u7b80\u4ecb"}),"\n",(0,r.jsx)(n.h3,{id:"\u6838\u5fc3\u670d\u52a1",children:"\u6838\u5fc3\u670d\u52a1"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ud83c\udf10 ",(0,r.jsx)(n.strong,{children:"\u514d\u8d39 CDN"}),": \u5168\u7403 300+ \u8282\u70b9\u52a0\u901f"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udd12 ",(0,r.jsx)(n.strong,{children:"\u514d\u8d39 SSL"}),": \u4e00\u952e\u542f\u7528 HTTPS"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udee1\ufe0f ",(0,r.jsx)(n.strong,{children:"DDoS \u9632\u62a4"}),": \u514d\u8d39\u7684 L3/L4/L7 \u9632\u62a4"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udce7 ",(0,r.jsx)(n.strong,{children:"\u90ae\u4ef6\u8def\u7531"}),": \u514d\u8d39\u7684\u90ae\u4ef6\u8f6c\u53d1\u670d\u52a1"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcc4 ",(0,r.jsx)(n.strong,{children:"Pages"}),": \u514d\u8d39\u7684\u9759\u6001\u7f51\u7ad9\u6258\u7ba1"]}),"\n",(0,r.jsxs)(n.li,{children:["\u26a1 ",(0,r.jsx)(n.strong,{children:"Workers"}),": \u8fb9\u7f18\u8ba1\u7b97\u5e73\u53f0"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\uddc4\ufe0f ",(0,r.jsx)(n.strong,{children:"R2"}),": S3 \u517c\u5bb9\u7684\u5bf9\u8c61\u5b58\u50a8"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udd11 ",(0,r.jsx)(n.strong,{children:"Zero Trust"}),": \u96f6\u4fe1\u4efb\u5b89\u5168\u670d\u52a1"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u4e3a\u4ec0\u4e48\u9009\u62e9-cloudflare",children:"\u4e3a\u4ec0\u4e48\u9009\u62e9 Cloudflare"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7279\u6027"}),(0,r.jsx)(n.th,{children:"\u514d\u8d39\u7248"}),(0,r.jsx)(n.th,{children:"\u4ed8\u8d39\u7248"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CDN \u52a0\u901f"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"SSL \u8bc1\u4e66"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"DDoS \u9632\u62a4"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u9875\u9762\u89c4\u5219"}),(0,r.jsx)(n.td,{children:"3 \u6761"}),(0,r.jsx)(n.td,{children:"\u66f4\u591a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Workers \u8bf7\u6c42"}),(0,r.jsx)(n.td,{children:"10 \u4e07/\u5929"}),(0,r.jsx)(n.td,{children:"\u66f4\u591a"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Pages \u9879\u76ee"}),(0,r.jsx)(n.td,{children:"\u65e0\u9650"}),(0,r.jsx)(n.td,{children:"\u65e0\u9650"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u90ae\u4ef6\u8def\u7531"}),(0,r.jsx)(n.td,{children:"\u2705"}),(0,r.jsx)(n.td,{children:"\u2705"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u8d26\u53f7\u6ce8\u518c\u4e0e\u57df\u540d\u6258\u7ba1",children:"\u8d26\u53f7\u6ce8\u518c\u4e0e\u57df\u540d\u6258\u7ba1"}),"\n",(0,r.jsx)(n.h3,{id:"\u6ce8\u518c\u8d26\u53f7",children:"\u6ce8\u518c\u8d26\u53f7"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8bbf\u95ee ",(0,r.jsx)(n.a,{href:"https://www.cloudflare.com/",children:"Cloudflare \u5b98\u7f51"})]}),"\n",(0,r.jsx)(n.li,{children:'\u70b9\u51fb "Sign Up" \u6ce8\u518c'}),"\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u90ae\u7bb1\u6ce8\u518c\u5e76\u9a8c\u8bc1"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6dfb\u52a0\u57df\u540d",children:"\u6dfb\u52a0\u57df\u540d"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u767b\u5f55 Cloudflare Dashboard"}),"\n",(0,r.jsx)(n.li,{children:'\u70b9\u51fb "Add a Site"'}),"\n",(0,r.jsxs)(n.li,{children:["\u8f93\u5165\u4f60\u7684\u57df\u540d\uff08\u5982 ",(0,r.jsx)(n.code,{children:"example.com"}),"\uff09"]}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9\u8ba1\u5212\uff08Free \u514d\u8d39\u7248\u5373\u53ef\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u66f4\u6362-dns-\u670d\u52a1\u5668",children:"\u66f4\u6362 DNS \u670d\u52a1\u5668"}),"\n",(0,r.jsx)(n.p,{children:"Cloudflare \u4f1a\u5206\u914d\u4e24\u4e2a DNS \u670d\u52a1\u5668\uff0c\u9700\u8981\u5728\u57df\u540d\u6ce8\u518c\u5546\u5904\u66f4\u6362\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Cloudflare \u5206\u914d\u7684 DNS \u670d\u52a1\u5668\u793a\u4f8b\narya.ns.cloudflare.com\ntim.ns.cloudflare.com\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u5e38\u89c1\u57df\u540d\u6ce8\u518c\u5546\u64cd\u4f5c",children:"\u5e38\u89c1\u57df\u540d\u6ce8\u518c\u5546\u64cd\u4f5c"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u963f\u91cc\u4e91/\u4e07\u7f51"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u767b\u5f55\u963f\u91cc\u4e91\u63a7\u5236\u53f0"}),"\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165\u57df\u540d\u7ba1\u7406"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9\u57df\u540d \u2192 DNS \u4fee\u6539"}),"\n",(0,r.jsx)(n.li,{children:"\u66ff\u6362\u4e3a Cloudflare \u7684 NS \u670d\u52a1\u5668"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Namesilo"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u767b\u5f55 Namesilo"}),"\n",(0,r.jsx)(n.li,{children:"Domain Manager \u2192 \u9009\u62e9\u57df\u540d"}),"\n",(0,r.jsx)(n.li,{children:"NameServers \u2192 Change"}),"\n",(0,r.jsx)(n.li,{children:"\u586b\u5165 Cloudflare NS \u670d\u52a1\u5668"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"GoDaddy"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u767b\u5f55 GoDaddy"}),"\n",(0,r.jsx)(n.li,{children:"\u6211\u7684\u4ea7\u54c1 \u2192 \u57df\u540d \u2192 DNS"}),"\n",(0,r.jsx)(n.li,{children:"\u66f4\u6539\u540d\u79f0\u670d\u52a1\u5668"}),"\n",(0,r.jsx)(n.li,{children:"\u8f93\u5165\u81ea\u5b9a\u4e49\u540d\u79f0\u670d\u52a1\u5668"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"DNS \u66f4\u6362\u53ef\u80fd\u9700\u8981 24-48 \u5c0f\u65f6\u751f\u6548\uff0c\u901a\u5e38\u51e0\u5206\u949f\u5230\u51e0\u5c0f\u65f6\u5185\u5373\u53ef\u5b8c\u6210\u3002"})}),"\n",(0,r.jsx)(n.h2,{id:"dns-\u89e3\u6790\u914d\u7f6e",children:"DNS \u89e3\u6790\u914d\u7f6e"}),"\n",(0,r.jsx)(n.h3,{id:"\u6dfb\u52a0-dns-\u8bb0\u5f55",children:"\u6dfb\u52a0 DNS \u8bb0\u5f55"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 DNS \u2192 Records \u2192 Add Record"}),"\n",(0,r.jsx)(n.h4,{id:"\u5e38\u7528\u8bb0\u5f55\u7c7b\u578b",children:"\u5e38\u7528\u8bb0\u5f55\u7c7b\u578b"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(n.th,{children:"\u7528\u9014"}),(0,r.jsx)(n.th,{children:"\u793a\u4f8b"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"A"}),(0,r.jsx)(n.td,{children:"\u6307\u5411 IPv4 \u5730\u5740"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@ \u2192 1.2.3.4"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AAAA"}),(0,r.jsx)(n.td,{children:"\u6307\u5411 IPv6 \u5730\u5740"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@ \u2192 2001:db8::1"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CNAME"}),(0,r.jsx)(n.td,{children:"\u522b\u540d\u8bb0\u5f55"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"www \u2192 example.com"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"MX"}),(0,r.jsx)(n.td,{children:"\u90ae\u4ef6\u670d\u52a1\u5668"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"@ \u2192 mail.example.com"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"TXT"}),(0,r.jsx)(n.td,{children:"\u6587\u672c\u8bb0\u5f55"}),(0,r.jsx)(n.td,{children:"SPF\u3001DKIM\u3001\u9a8c\u8bc1\u7b49"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"\u914d\u7f6e\u793a\u4f8b",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u6839\u57df\u540d\u6307\u5411\u670d\u52a1\u5668\n\u7c7b\u578b: A\n\u540d\u79f0: @\n\u5185\u5bb9: 192.168.1.100\n\u4ee3\u7406\u72b6\u6001: \u5df2\u4ee3\u7406\uff08\u6a59\u8272\u4e91\u6735\uff09\n\n# www \u5b50\u57df\u540d\n\u7c7b\u578b: CNAME\n\u540d\u79f0: www\n\u5185\u5bb9: example.com\n\u4ee3\u7406\u72b6\u6001: \u5df2\u4ee3\u7406\n\n# API \u670d\u52a1\uff08\u4e0d\u8d70 CDN\uff09\n\u7c7b\u578b: A\n\u540d\u79f0: api\n\u5185\u5bb9: 192.168.1.101\n\u4ee3\u7406\u72b6\u6001: \u4ec5 DNS\uff08\u7070\u8272\u4e91\u6735\uff09\n\n# \u90ae\u4ef6\u670d\u52a1\u5668\n\u7c7b\u578b: MX\n\u540d\u79f0: @\n\u5185\u5bb9: mail.example.com\n\u4f18\u5148\u7ea7: 10\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u4ee3\u7406\u6a21\u5f0f\u8bf4\u660e",children:"\u4ee3\u7406\u6a21\u5f0f\u8bf4\u660e"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udfe0 \u5df2\u4ee3\u7406 (Proxied)"}),": \u6d41\u91cf\u7ecf\u8fc7 Cloudflare\uff0c\u4eab\u53d7 CDN\u3001SSL\u3001\u9632\u62a4"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u26ab \u4ec5 DNS (DNS Only)"}),": \u4ec5\u89e3\u6790\uff0c\u4e0d\u7ecf\u8fc7 Cloudflare"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u63a8\u8350\u4f7f\u7528\u4ee3\u7406\u6a21\u5f0f\n\u7f51\u7ad9: \u4ee3\u7406\n\u9759\u6001\u8d44\u6e90: \u4ee3\u7406\nAPI: \u6839\u636e\u9700\u6c42\u9009\u62e9\n\n# \u5fc5\u987b\u4f7f\u7528\u4ec5 DNS\n\u90ae\u4ef6\u670d\u52a1\u5668: \u4ec5 DNS\nFTP: \u4ec5 DNS\nSSH: \u4ec5 DNS\uff08\u6216\u4f7f\u7528 Cloudflare Tunnel\uff09\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ssltls-\u914d\u7f6e",children:"SSL/TLS \u914d\u7f6e"}),"\n",(0,r.jsx)(n.h3,{id:"\u52a0\u5bc6\u6a21\u5f0f",children:"\u52a0\u5bc6\u6a21\u5f0f"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 SSL/TLS \u2192 Overview"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u52a0\u5bc6\u6a21\u5f0f\u9009\u9879\nOff: \u4e0d\u52a0\u5bc6\uff08\u4e0d\u63a8\u8350\uff09\nFlexible: \u7528\u6237 \u2192 Cloudflare \u52a0\u5bc6\uff08\u6e90\u7ad9\u53ef\u4ee5\u662f HTTP\uff09\nFull: \u5168\u7a0b\u52a0\u5bc6\uff08\u6e90\u7ad9\u9700\u8981 SSL \u8bc1\u4e66\uff0c\u53ef\u81ea\u7b7e\u540d\uff09\nFull (Strict): \u5168\u7a0b\u4e25\u683c\u52a0\u5bc6\uff08\u6e90\u7ad9\u9700\u8981\u6709\u6548 SSL \u8bc1\u4e66\uff09\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["\u63a8\u8350\u4f7f\u7528 ",(0,r.jsx)(n.strong,{children:"Full (Strict)"})," \u6a21\u5f0f\uff0c\u914d\u5408\u6e90\u7ad9 SSL \u8bc1\u4e66\u4f7f\u7528\u3002"]})}),"\n",(0,r.jsx)(n.h3,{id:"\u83b7\u53d6\u6e90\u7ad9\u8bc1\u4e66",children:"\u83b7\u53d6\u6e90\u7ad9\u8bc1\u4e66"}),"\n",(0,r.jsx)(n.p,{children:"Cloudflare \u63d0\u4f9b\u514d\u8d39\u7684\u6e90\u7ad9\u8bc1\u4e66\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 SSL/TLS \u2192 Origin Server"}),"\n",(0,r.jsx)(n.li,{children:'\u70b9\u51fb "Create Certificate"'}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9\u8bc1\u4e66\u6709\u6548\u671f\uff08\u6700\u957f 15 \u5e74\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u4e0b\u8f7d\u8bc1\u4e66\u548c\u79c1\u94a5"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u8bc1\u4e66\u5b89\u88c5\u4f4d\u7f6e\u793a\u4f8b (Nginx)\n/etc/nginx/ssl/cloudflare-origin.pem    # \u8bc1\u4e66\n/etc/nginx/ssl/cloudflare-origin.key    # \u79c1\u94a5\n"})}),"\n",(0,r.jsx)(n.h4,{id:"nginx-\u914d\u7f6e",children:"Nginx \u914d\u7f6e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 443 ssl http2;\n    server_name example.com;\n\n    ssl_certificate /etc/nginx/ssl/cloudflare-origin.pem;\n    ssl_certificate_key /etc/nginx/ssl/cloudflare-origin.key;\n\n    # \u4ec5\u5141\u8bb8 Cloudflare IP \u8bbf\u95ee\n    # \u53c2\u8003: https://www.cloudflare.com/ips/\n\n    location / {\n        root /var/www/html;\n        index index.html;\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"edge-certificates",children:"Edge Certificates"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 SSL/TLS \u2192 Edge Certificates"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u63a8\u8350\u8bbe\u7f6e\nAlways Use HTTPS: \u5f00\u542f\nAutomatic HTTPS Rewrites: \u5f00\u542f\nMinimum TLS Version: TLS 1.2\nTLS 1.3: \u5f00\u542f\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u514d\u8d39-cdn-\u914d\u7f6e",children:"\u514d\u8d39 CDN \u914d\u7f6e"}),"\n",(0,r.jsx)(n.h3,{id:"\u7f13\u5b58\u914d\u7f6e",children:"\u7f13\u5b58\u914d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Caching \u2192 Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u7f13\u5b58\u7ea7\u522b\nCaching Level: Standard\n\n# \u6d4f\u89c8\u5668\u7f13\u5b58 TTL\nBrowser Cache TTL: 4 hours\uff08\u6216\u6839\u636e\u9700\u6c42\u8c03\u6574\uff09\n\n# \u5f00\u53d1\u6a21\u5f0f\uff08\u8c03\u8bd5\u65f6\u4f7f\u7528\uff09\nDevelopment Mode: \u5173\u95ed\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7f13\u5b58\u89c4\u5219",children:"\u7f13\u5b58\u89c4\u5219"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Caching \u2192 Cache Rules"}),"\n",(0,r.jsx)(n.h4,{id:"\u521b\u5efa\u7f13\u5b58\u89c4\u5219\u793a\u4f8b",children:"\u521b\u5efa\u7f13\u5b58\u89c4\u5219\u793a\u4f8b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u89c4\u5219 1: \u9759\u6001\u8d44\u6e90\u957f\u671f\u7f13\u5b58\n\u89c4\u5219\u540d\u79f0: Cache Static Assets\n\u5339\u914d\u6761\u4ef6: URI \u8def\u5f84\u5305\u542b /static/ \u6216 /assets/\n\u64cd\u4f5c:\n  - \u7f13\u5b58\u9002\u7528\u6027: \u5408\u683c\n  - Edge TTL: 1 \u4e2a\u6708\n  - Browser TTL: 1 \u5468\n\n# \u89c4\u5219 2: \u4e0d\u7f13\u5b58 API\n\u89c4\u5219\u540d\u79f0: Bypass API\n\u5339\u914d\u6761\u4ef6: URI \u8def\u5f84\u4ee5 /api/ \u5f00\u5934\n\u64cd\u4f5c:\n  - \u7f13\u5b58\u9002\u7528\u6027: \u7ed5\u8fc7\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u6e05\u9664\u7f13\u5b58",children:"\u6e05\u9664\u7f13\u5b58"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Caching \u2192 Configuration \u2192 Purge Cache"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u6e05\u9664\u9009\u9879\nPurge Everything: \u6e05\u9664\u6240\u6709\u7f13\u5b58\nCustom Purge: \u6e05\u9664\u6307\u5b9a URL\n\n# \u81ea\u5b9a\u4e49\u6e05\u9664\u793a\u4f8b\nURLs:\n  - https://example.com/css/style.css\n  - https://example.com/js/app.js\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u9875\u9762\u89c4\u5219page-rules",children:"\u9875\u9762\u89c4\u5219\uff08Page Rules\uff09"}),"\n",(0,r.jsx)(n.p,{children:"\u514d\u8d39\u7248\u6709 3 \u6761\u9875\u9762\u89c4\u5219\uff0c\u53ef\u5b9e\u73b0\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u89c4\u5219 1: \u5f3a\u5236 HTTPS\nURL \u5339\u914d: http://*example.com/*\n\u64cd\u4f5c: Always Use HTTPS\n\n# \u89c4\u5219 2: \u7f13\u5b58\u6240\u6709\u5185\u5bb9\nURL \u5339\u914d: *example.com/static/*\n\u64cd\u4f5c:\n  - Cache Level: Cache Everything\n  - Edge Cache TTL: 1 month\n\n# \u89c4\u5219 3: \u7981\u7528\u5b89\u5168\u529f\u80fd\uff08\u7279\u6b8a\u9700\u6c42\uff09\nURL \u5339\u914d: *example.com/webhook/*\n\u64cd\u4f5c:\n  - Security Level: Essentially Off\n  - Browser Integrity Check: Off\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cloudflare-pages",children:"Cloudflare Pages"}),"\n",(0,r.jsx)(n.p,{children:"Pages \u662f Cloudflare \u63d0\u4f9b\u7684\u514d\u8d39\u9759\u6001\u7f51\u7ad9\u6258\u7ba1\u670d\u52a1\uff0c\u7c7b\u4f3c\u4e8e Vercel \u548c Netlify\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u7279\u6027",children:"\u7279\u6027"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 \u65e0\u9650\u7ad9\u70b9\u548c\u8bf7\u6c42"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 \u65e0\u9650\u5e26\u5bbd"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 \u81ea\u52a8 HTTPS"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 \u5168\u7403 CDN"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Git \u96c6\u6210\uff08GitHub/GitLab\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 \u9884\u89c8\u90e8\u7f72"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 \u81ea\u5b9a\u4e49\u57df\u540d"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u521b\u5efa-pages-\u9879\u76ee",children:"\u521b\u5efa Pages \u9879\u76ee"}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f-1-\u8fde\u63a5-git-\u4ed3\u5e93",children:"\u65b9\u5f0f 1: \u8fde\u63a5 Git \u4ed3\u5e93"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 Workers & Pages \u2192 Create"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9 Pages \u2192 Connect to Git"}),"\n",(0,r.jsx)(n.li,{children:"\u6388\u6743 GitHub/GitLab"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9\u4ed3\u5e93\u548c\u5206\u652f"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u6784\u5efa\u914d\u7f6e\u793a\u4f8b\n\u9879\u76ee\u540d\u79f0: my-website\n\u751f\u4ea7\u5206\u652f: main\n\u6784\u5efa\u547d\u4ee4: npm run build\n\u6784\u5efa\u8f93\u51fa\u76ee\u5f55: dist\n\n# \u6846\u67b6\u9884\u8bbe\n- React: npm run build \u2192 build\n- Vue: npm run build \u2192 dist\n- Next.js: npm run build \u2192 .next\n- Docusaurus: npm run build \u2192 build\n- Hugo: hugo \u2192 public\n- Jekyll: jekyll build \u2192 _site\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f-2-\u76f4\u63a5\u4e0a\u4f20",children:"\u65b9\u5f0f 2: \u76f4\u63a5\u4e0a\u4f20"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 Workers & Pages \u2192 Create"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9 Pages \u2192 Upload assets"}),"\n",(0,r.jsx)(n.li,{children:"\u62d6\u62fd\u6587\u4ef6\u5939\u6216 ZIP \u6587\u4ef6\u4e0a\u4f20"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u73af\u5883\u53d8\u91cf",children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165\u9879\u76ee Settings \u2192 Environment variables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u751f\u4ea7\u73af\u5883\u53d8\u91cf\nNODE_VERSION: 18\nAPI_URL: https://api.example.com\n\n# \u9884\u89c8\u73af\u5883\u53d8\u91cf\uff08\u53ef\u5355\u72ec\u8bbe\u7f6e\uff09\nAPI_URL: https://api-staging.example.com\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u57df\u540d",children:"\u81ea\u5b9a\u4e49\u57df\u540d"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165\u9879\u76ee \u2192 Custom domains"}),"\n",(0,r.jsx)(n.li,{children:'\u70b9\u51fb "Set up a custom domain"'}),"\n",(0,r.jsxs)(n.li,{children:["\u8f93\u5165\u57df\u540d\uff08\u5982 ",(0,r.jsx)(n.code,{children:"www.example.com"}),"\uff09"]}),"\n",(0,r.jsx)(n.li,{children:"Cloudflare \u4f1a\u81ea\u52a8\u6dfb\u52a0 DNS \u8bb0\u5f55"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u57df\u540d\u914d\u7f6e\u793a\u4f8b\n\u4e3b\u57df\u540d: example.com\nwww \u5b50\u57df: www.example.com\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u91cd\u5b9a\u5411\u548c-headers",children:"\u91cd\u5b9a\u5411\u548c Headers"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u9879\u76ee\u6839\u76ee\u5f55\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,r.jsxs)(n.h4,{id:"_redirects-\u6587\u4ef6",children:[(0,r.jsx)(n.code,{children:"_redirects"})," \u6587\u4ef6"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u91cd\u5b9a\u5411\u89c4\u5219\n/old-page /new-page 301\n/blog/* /posts/:splat 301\n/docs /docs/intro 302\n\n# \u4ee3\u7406\uff08\u9690\u85cf\u771f\u5b9e URL\uff09\n/api/* https://api.example.com/:splat 200\n"})}),"\n",(0,r.jsxs)(n.h4,{id:"_headers-\u6587\u4ef6",children:[(0,r.jsx)(n.code,{children:"_headers"})," \u6587\u4ef6"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5168\u5c40 Headers\n/*\n  X-Frame-Options: DENY\n  X-Content-Type-Options: nosniff\n  Referrer-Policy: strict-origin-when-cross-origin\n\n# \u9759\u6001\u8d44\u6e90\u7f13\u5b58\n/static/*\n  Cache-Control: public, max-age=31536000, immutable\n\n# API \u7981\u7528\u7f13\u5b58\n/api/*\n  Cache-Control: no-store\n"})}),"\n",(0,r.jsx)(n.h3,{id:"functions\u8fb9\u7f18\u51fd\u6570",children:"Functions\uff08\u8fb9\u7f18\u51fd\u6570\uff09"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"functions"})," \u76ee\u5f55\u521b\u5efa\u51fd\u6570\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"my-project/\n\u251c\u2500\u2500 functions/\n\u2502   \u251c\u2500\u2500 api/\n\u2502   \u2502   \u2514\u2500\u2500 hello.js    \u2192 /api/hello\n\u2502   \u2514\u2500\u2500 contact.js      \u2192 /contact\n\u251c\u2500\u2500 public/\n\u2514\u2500\u2500 package.json\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// functions/api/hello.js\nexport async function onRequest(context) {\n  return new Response(\n    JSON.stringify({\n      message: "Hello from Cloudflare Pages Functions!",\n      timestamp: new Date().toISOString(),\n    }),\n    {\n      headers: {\n        "Content-Type": "application/json",\n      },\n    }\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"cloudflare-workers",children:"Cloudflare Workers"}),"\n",(0,r.jsx)(n.p,{children:"Workers \u662f Cloudflare \u7684\u8fb9\u7f18\u8ba1\u7b97\u5e73\u53f0\uff0c\u53ef\u5728\u5168\u7403\u8fb9\u7f18\u8282\u70b9\u8fd0\u884c JavaScript/TypeScript\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u514d\u8d39\u989d\u5ea6",children:"\u514d\u8d39\u989d\u5ea6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"\u6bcf\u65e5\u8bf7\u6c42: 100,000 \u6b21\nCPU \u65f6\u95f4: 10ms/\u8bf7\u6c42\nWorkers \u6570\u91cf: 100 \u4e2a\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u521b\u5efa-worker",children:"\u521b\u5efa Worker"}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f-1-dashboard-\u521b\u5efa",children:"\u65b9\u5f0f 1: Dashboard \u521b\u5efa"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 Workers & Pages \u2192 Create"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9 Workers \u2192 Create Worker"}),"\n",(0,r.jsx)(n.li,{children:"\u7f16\u8f91\u4ee3\u7801\u5e76\u90e8\u7f72"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u65b9\u5f0f-2-wrangler-cli",children:"\u65b9\u5f0f 2: Wrangler CLI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5 Wrangler\nnpm install -g wrangler\n\n# \u767b\u5f55\nwrangler login\n\n# \u521b\u5efa\u9879\u76ee\nwrangler init my-worker\n\n# \u672c\u5730\u5f00\u53d1\nwrangler dev\n\n# \u90e8\u7f72\nwrangler deploy\n"})}),"\n",(0,r.jsx)(n.h3,{id:"worker-\u793a\u4f8b",children:"Worker \u793a\u4f8b"}),"\n",(0,r.jsx)(n.h4,{id:"\u57fa\u7840-hello-world",children:"\u57fa\u7840 Hello World"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async fetch(request, env, ctx) {\n    return new Response("Hello World!");\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h4,{id:"\u8bf7\u6c42\u8def\u7531",children:"\u8bf7\u6c42\u8def\u7531"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async fetch(request, env, ctx) {\n    const url = new URL(request.url);\n\n    switch (url.pathname) {\n      case "/":\n        return new Response("Home Page");\n      case "/api/hello":\n        return Response.json({ message: "Hello API" });\n      case "/api/time":\n        return Response.json({ time: new Date().toISOString() });\n      default:\n        return new Response("Not Found", { status: 404 });\n    }\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h4,{id:"\u53cd\u5411\u4ee3\u7406",children:"\u53cd\u5411\u4ee3\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async fetch(request, env, ctx) {\n    const url = new URL(request.url);\n\n    // \u4fee\u6539\u76ee\u6807\u5730\u5740\n    url.hostname = "api.example.com";\n\n    // \u8f6c\u53d1\u8bf7\u6c42\n    return fetch(url.toString(), {\n      method: request.method,\n      headers: request.headers,\n      body: request.body,\n    });\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h4,{id:"cors-\u4ee3\u7406",children:"CORS \u4ee3\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async fetch(request, env, ctx) {\n    // \u5904\u7406\u9884\u68c0\u8bf7\u6c42\n    if (request.method === "OPTIONS") {\n      return new Response(null, {\n        headers: {\n          "Access-Control-Allow-Origin": "*",\n          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",\n          "Access-Control-Allow-Headers": "Content-Type, Authorization",\n        },\n      });\n    }\n\n    const url = new URL(request.url);\n    const targetUrl = url.searchParams.get("url");\n\n    if (!targetUrl) {\n      return new Response("Missing url parameter", { status: 400 });\n    }\n\n    const response = await fetch(targetUrl, {\n      method: request.method,\n      headers: request.headers,\n      body: request.body,\n    });\n\n    const newResponse = new Response(response.body, response);\n    newResponse.headers.set("Access-Control-Allow-Origin", "*");\n\n    return newResponse;\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h4,{id:"\u8bbf\u95ee\u7edf\u8ba1",children:"\u8bbf\u95ee\u7edf\u8ba1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async fetch(request, env, ctx) {\n    const url = new URL(request.url);\n\n    // \u8bb0\u5f55\u8bbf\u95ee\uff08\u4f7f\u7528 KV \u5b58\u50a8\uff09\n    const key = `visits:${url.pathname}`;\n    const visits = parseInt((await env.STATS.get(key)) || "0") + 1;\n    ctx.waitUntil(env.STATS.put(key, visits.toString()));\n\n    // \u8fd4\u56de\u539f\u59cb\u54cd\u5e94\n    return fetch(request);\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h3,{id:"workers-kv",children:"Workers KV"}),"\n",(0,r.jsx)(n.p,{children:"KV \u662f Cloudflare \u7684\u952e\u503c\u5b58\u50a8\u670d\u52a1\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# \u521b\u5efa KV \u547d\u540d\u7a7a\u95f4\nwrangler kv namespace create "MY_KV"\n\n# \u7ed1\u5b9a\u5230 Worker\uff08wrangler.toml\uff09\n[[kv_namespaces]]\nbinding = "MY_KV"\nid = "xxx"\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// \u4f7f\u7528 KV\nexport default {\n  async fetch(request, env, ctx) {\n    // \u5199\u5165\n    await env.MY_KV.put("key", "value");\n\n    // \u8bfb\u53d6\n    const value = await env.MY_KV.get("key");\n\n    // \u5220\u9664\n    await env.MY_KV.delete("key");\n\n    // \u5217\u51fa\u6240\u6709\u952e\n    const keys = await env.MY_KV.list();\n\n    return Response.json({ value, keys });\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u57df\u540d-1",children:"\u81ea\u5b9a\u4e49\u57df\u540d"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 Worker \u2192 Settings \u2192 Triggers"}),"\n",(0,r.jsx)(n.li,{children:"\u6dfb\u52a0 Custom Domain"}),"\n",(0,r.jsxs)(n.li,{children:["\u8f93\u5165\u57df\u540d\uff08\u5982 ",(0,r.jsx)(n.code,{children:"api.example.com"}),"\uff09"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u90ae\u4ef6\u8def\u7531-email-routing",children:"\u90ae\u4ef6\u8def\u7531 (Email Routing)"}),"\n",(0,r.jsx)(n.p,{children:"Cloudflare Email Routing \u5141\u8bb8\u4f60\u514d\u8d39\u521b\u5efa\u548c\u8f6c\u53d1\u57df\u540d\u90ae\u7bb1\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5f00\u542f\u90ae\u4ef6\u8def\u7531",children:"\u5f00\u542f\u90ae\u4ef6\u8def\u7531"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 Email \u2192 Email Routing"}),"\n",(0,r.jsx)(n.li,{children:'\u70b9\u51fb "Get started"'}),"\n",(0,r.jsx)(n.li,{children:"\u6dfb\u52a0 DNS \u8bb0\u5f55\uff08Cloudflare \u4f1a\u81ea\u52a8\u6dfb\u52a0\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u914d\u7f6e\u8f6c\u53d1\u89c4\u5219",children:"\u914d\u7f6e\u8f6c\u53d1\u89c4\u5219"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u8f6c\u53d1\u5230\u4e2a\u4eba\u90ae\u7bb1\n\u6e90\u5730\u5740: contact@example.com\n\u76ee\u6807\u5730\u5740: your-personal@gmail.com\n\n# \u901a\u914d\u7b26\u8f6c\u53d1\n\u6e90\u5730\u5740: *@example.com\n\u76ee\u6807\u5730\u5740: catch-all@gmail.com\n\n# \u591a\u4e2a\u5730\u5740\n\u6e90\u5730\u5740: support@example.com\n\u76ee\u6807\u5730\u5740:\n  - support1@gmail.com\n  - support2@gmail.com\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u76ee\u6807\u90ae\u7bb1\u9a8c\u8bc1",children:"\u76ee\u6807\u90ae\u7bb1\u9a8c\u8bc1"}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u6b21\u6dfb\u52a0\u76ee\u6807\u90ae\u7bb1\u9700\u8981\u9a8c\u8bc1\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u6dfb\u52a0\u76ee\u6807\u90ae\u7bb1"}),"\n",(0,r.jsx)(n.li,{children:"\u67e5\u6536\u9a8c\u8bc1\u90ae\u4ef6"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u9a8c\u8bc1\u94fe\u63a5"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49-mx-\u8bb0\u5f55",children:"\u81ea\u5b9a\u4e49 MX \u8bb0\u5f55"}),"\n",(0,r.jsx)(n.p,{children:"Cloudflare \u4f1a\u81ea\u52a8\u6dfb\u52a0\u6240\u9700\u7684 DNS \u8bb0\u5f55\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# MX \u8bb0\u5f55\n\u7c7b\u578b: MX\n\u540d\u79f0: @\n\u5185\u5bb9: route1.mx.cloudflare.net\n\u4f18\u5148\u7ea7: 29\n\n\u7c7b\u578b: MX\n\u540d\u79f0: @\n\u5185\u5bb9: route2.mx.cloudflare.net\n\u4f18\u5148\u7ea7: 73\n\n\u7c7b\u578b: MX\n\u540d\u79f0: @\n\u5185\u5bb9: route3.mx.cloudflare.net\n\u4f18\u5148\u7ea7: 4\n\n# TXT \u8bb0\u5f55\uff08SPF\uff09\n\u7c7b\u578b: TXT\n\u540d\u79f0: @\n\u5185\u5bb9: v=spf1 include:_spf.mx.cloudflare.net ~all\n"})}),"\n",(0,r.jsx)(n.h3,{id:"email-workers",children:"Email Workers"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528 Workers \u5904\u7406\u90ae\u4ef6\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async email(message, env, ctx) {\n    // \u83b7\u53d6\u90ae\u4ef6\u4fe1\u606f\n    const from = message.from;\n    const to = message.to;\n    const subject = message.headers.get("subject");\n\n    // \u6839\u636e\u6761\u4ef6\u8f6c\u53d1\n    if (to === "support@example.com") {\n      await message.forward("support-team@company.com");\n    } else if (subject.includes("urgent")) {\n      await message.forward("urgent@company.com");\n    } else {\n      await message.forward("default@gmail.com");\n    }\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5b89\u5168\u914d\u7f6e",children:"\u5b89\u5168\u914d\u7f6e"}),"\n",(0,r.jsx)(n.h3,{id:"waf-\u89c4\u5219",children:"WAF \u89c4\u5219"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Security \u2192 WAF"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u6258\u7ba1\u89c4\u5219\uff08\u514d\u8d39\u7248\u6709\u9650\uff09\nCloudflare \u6258\u7ba1\u89c4\u5219: \u5f00\u542f\n\n# \u901f\u7387\u9650\u5236\n\u89c4\u5219: \u9650\u5236\u5355 IP \u8bf7\u6c42\u9891\u7387\n\u9608\u503c: 100 \u8bf7\u6c42/\u5206\u949f\n\u64cd\u4f5c: Challenge\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bot-\u7ba1\u7406",children:"Bot \u7ba1\u7406"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Security \u2192 Bots"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u673a\u5668\u4eba\u653b\u51fb\u6a21\u5f0f\uff08\u514d\u8d39\uff09\nBot Fight Mode: \u5f00\u542f\n\n# \u8d85\u7ea7\u673a\u5668\u4eba\u653b\u51fb\u6a21\u5f0f\uff08\u4ed8\u8d39\uff09\nSuper Bot Fight Mode: \u6839\u636e\u9700\u6c42\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ip-\u8bbf\u95ee\u89c4\u5219",children:"IP \u8bbf\u95ee\u89c4\u5219"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Security \u2192 WAF \u2192 Tools"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u5c01\u7981 IP\nIP \u5730\u5740: 1.2.3.4\n\u64cd\u4f5c: Block\n\n# \u5c01\u7981\u56fd\u5bb6\n\u56fd\u5bb6: XX\n\u64cd\u4f5c: Block\n\n# \u5141\u8bb8\u7279\u5b9a IP\nIP \u5730\u5740: \u516c\u53f8 IP\n\u64cd\u4f5c: Allow\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u9a8c\u8bc1\u7801-challenge",children:"\u9a8c\u8bc1\u7801 (Challenge)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u5b89\u5168\u7ea7\u522b\nSecurity Level:\n  - Essentially Off: \u4ec5\u6311\u6218\u6700\u6076\u610f\u7684\u8bf7\u6c42\n  - Low: \u6311\u6218\u8f83\u5a01\u80c1\u7684\u8bf7\u6c42\n  - Medium: \u6311\u6218\u4e2d\u7b49\u5a01\u80c1\u7684\u8bf7\u6c42\n  - High: \u6311\u6218\u6240\u6709\u53ef\u7591\u8bf7\u6c42\n  - I'm Under Attack: \u5168\u90e8\u6311\u6218\uff08\u53d7\u653b\u51fb\u65f6\u4f7f\u7528\uff09\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cloudflare-tunnel",children:"Cloudflare Tunnel"}),"\n",(0,r.jsx)(n.p,{children:"Cloudflare Tunnel \u53ef\u4ee5\u5b89\u5168\u5730\u5c06\u672c\u5730\u670d\u52a1\u66b4\u9732\u5230\u516c\u7f51\uff0c\u65e0\u9700\u5f00\u653e\u7aef\u53e3\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u88c5-cloudflared",children:"\u5b89\u88c5 cloudflared"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install cloudflared\n\n# Windows (\u4f7f\u7528 winget)\nwinget install Cloudflare.cloudflared\n\n# Linux\ncurl -L --output cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb\nsudo dpkg -i cloudflared.deb\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u521b\u5efa-tunnel",children:"\u521b\u5efa Tunnel"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u767b\u5f55\ncloudflared tunnel login\n\n# \u521b\u5efa Tunnel\ncloudflared tunnel create my-tunnel\n\n# \u914d\u7f6e\u8def\u7531\ncloudflared tunnel route dns my-tunnel app.example.com\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u914d\u7f6e\u6587\u4ef6",children:"\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsxs)(n.p,{children:["\u521b\u5efa ",(0,r.jsx)(n.code,{children:"~/.cloudflared/config.yml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"tunnel: <tunnel-id>\ncredentials-file: ~/.cloudflared/<tunnel-id>.json\n\ningress:\n  # \u7f51\u7ad9\n  - hostname: app.example.com\n    service: http://localhost:3000\n\n  # API\n  - hostname: api.example.com\n    service: http://localhost:8080\n\n  # SSH\n  - hostname: ssh.example.com\n    service: ssh://localhost:22\n\n  # \u9ed8\u8ba4\u89c4\u5219\uff08\u5fc5\u987b\uff09\n  - service: http_status:404\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u8fd0\u884c-tunnel",children:"\u8fd0\u884c Tunnel"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u524d\u53f0\u8fd0\u884c\ncloudflared tunnel run my-tunnel\n\n# \u4f5c\u4e3a\u670d\u52a1\u5b89\u88c5\uff08Linux\uff09\nsudo cloudflared service install\nsudo systemctl start cloudflared\n"})}),"\n",(0,r.jsx)(n.h2,{id:"r2-\u5bf9\u8c61\u5b58\u50a8",children:"R2 \u5bf9\u8c61\u5b58\u50a8"}),"\n",(0,r.jsx)(n.p,{children:"R2 \u662f Cloudflare \u7684 S3 \u517c\u5bb9\u5bf9\u8c61\u5b58\u50a8\uff0c\u514d\u8d39\u989d\u5ea6\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"10 GB \u5b58\u50a8"}),"\n",(0,r.jsx)(n.li,{children:"100 \u4e07\u6b21 A \u7c7b\u64cd\u4f5c/\u6708"}),"\n",(0,r.jsx)(n.li,{children:"1000 \u4e07\u6b21 B \u7c7b\u64cd\u4f5c/\u6708"}),"\n",(0,r.jsx)(n.li,{children:"\u65e0\u51fa\u7ad9\u6d41\u91cf\u8d39\u7528"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u521b\u5efa\u5b58\u50a8\u6876",children:"\u521b\u5efa\u5b58\u50a8\u6876"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fdb\u5165 R2 \u2192 Create bucket"}),"\n",(0,r.jsx)(n.li,{children:"\u8f93\u5165\u5b58\u50a8\u6876\u540d\u79f0"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9\u4f4d\u7f6e\uff08\u81ea\u52a8\u6216\u6307\u5b9a\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u4f7f\u7528-s3-api",children:"\u4f7f\u7528 S3 API"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4f7f\u7528 AWS CLI\naws configure --profile cloudflare\n# Access Key ID: \u5728 R2 \u2192 Manage R2 API Tokens \u521b\u5efa\n# Secret Access Key: \u521b\u5efa\u65f6\u83b7\u53d6\n# Region: auto\n\n# \u914d\u7f6e\u7aef\u70b9\naws s3 ls --endpoint-url https://<account-id>.r2.cloudflarestorage.com --profile cloudflare\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5728-worker-\u4e2d\u4f7f\u7528-r2",children:"\u5728 Worker \u4e2d\u4f7f\u7528 R2"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'export default {\n  async fetch(request, env, ctx) {\n    const url = new URL(request.url);\n    const key = url.pathname.slice(1);\n\n    switch (request.method) {\n      case "PUT":\n        await env.MY_BUCKET.put(key, request.body);\n        return new Response(`Put ${key} successfully!`);\n\n      case "GET":\n        const object = await env.MY_BUCKET.get(key);\n        if (object === null) {\n          return new Response("Object Not Found", { status: 404 });\n        }\n        return new Response(object.body);\n\n      case "DELETE":\n        await env.MY_BUCKET.delete(key);\n        return new Response("Deleted!");\n\n      default:\n        return new Response("Method Not Allowed", { status: 405 });\n    }\n  },\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5e38\u7528\u6280\u5de7",children:"\u5e38\u7528\u6280\u5de7"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5f00\u53d1\u6a21\u5f0f",children:"1. \u5f00\u53d1\u6a21\u5f0f"}),"\n",(0,r.jsx)(n.p,{children:"\u8c03\u8bd5\u65f6\u4e34\u65f6\u5173\u95ed\u7f13\u5b58\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"\u4f4d\u7f6e: Caching \u2192 Configuration \u2192 Development Mode\n\u6301\u7eed\u65f6\u95f4: 3 \u5c0f\u65f6\n\u6548\u679c: \u6682\u505c\u8fb9\u7f18\u7f13\u5b58\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u6682\u505c-cloudflare",children:"2. \u6682\u505c Cloudflare"}),"\n",(0,r.jsx)(n.p,{children:"\u7d27\u6025\u60c5\u51b5\u4e0b\u6682\u505c Cloudflare \u4ee3\u7406\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"\u4f4d\u7f6e: Overview \u2192 Advanced Actions \u2192 Pause Cloudflare on Site\n\u6548\u679c: \u6240\u6709\u6d41\u91cf\u76f4\u8fde\u6e90\u7ad9\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-ip-\u5730\u7406\u4f4d\u7f6e",children:"3. IP \u5730\u7406\u4f4d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u83b7\u53d6\u8bbf\u5ba2\u4f4d\u7f6e\u4fe1\u606f\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Worker \u4e2d\nexport default {\n  async fetch(request, env, ctx) {\n    const cf = request.cf;\n    return Response.json({\n      country: cf.country,\n      city: cf.city,\n      region: cf.region,\n      timezone: cf.timezone,\n      postalCode: cf.postalCode,\n      latitude: cf.latitude,\n      longitude: cf.longitude,\n    });\n  },\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-\u771f\u5b9e-ip-\u83b7\u53d6",children:"4. \u771f\u5b9e IP \u83b7\u53d6"}),"\n",(0,r.jsx)(n.p,{children:"\u6e90\u7ad9\u83b7\u53d6\u771f\u5b9e\u8bbf\u5ba2 IP\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# \u8bf7\u6c42\u5934\nCF-Connecting-IP: \u771f\u5b9e\u5ba2\u6237\u7aef IP\nX-Forwarded-For: \u4ee3\u7406\u94fe IP \u5217\u8868\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"# Nginx \u914d\u7f6e\nset_real_ip_from 103.21.244.0/22;\nset_real_ip_from 103.22.200.0/22;\n# ... \u66f4\u591a Cloudflare IP\nreal_ip_header CF-Connecting-IP;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-\u4ec5\u5141\u8bb8-cloudflare-ip",children:"5. \u4ec5\u5141\u8bb8 Cloudflare IP"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u83b7\u53d6 Cloudflare IP \u5217\u8868\ncurl https://www.cloudflare.com/ips-v4\ncurl https://www.cloudflare.com/ips-v6\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"# Nginx \u914d\u7f6e\nallow 103.21.244.0/22;\nallow 103.22.200.0/22;\n# ... \u66f4\u591a Cloudflare IP\ndeny all;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u65e0\u9650\u91cd\u5b9a\u5411",children:"1. \u65e0\u9650\u91cd\u5b9a\u5411"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),": SSL \u6a21\u5f0f\u8bbe\u7f6e\u4e3a Flexible\uff0c\u4f46\u6e90\u7ad9\u5f3a\u5236 HTTPS"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"SSL \u6a21\u5f0f\u6539\u4e3a: Full \u6216 Full (Strict)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u6e90\u7ad9-ip-\u6cc4\u9732",children:"2. \u6e90\u7ad9 IP \u6cc4\u9732"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u9884\u9632\u63aa\u65bd"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u66f4\u6362\u6e90\u7ad9 IP"}),"\n",(0,r.jsx)(n.li,{children:"\u4ec5\u5141\u8bb8 Cloudflare IP \u8bbf\u95ee"}),"\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528 Cloudflare Tunnel"}),"\n",(0,r.jsx)(n.li,{children:"\u5386\u53f2 DNS \u8bb0\u5f55\u6e05\u7406"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-\u7f13\u5b58\u4e0d\u66f4\u65b0",children:"3. \u7f13\u5b58\u4e0d\u66f4\u65b0"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u6e05\u9664 Cloudflare \u7f13\u5b58"}),"\n",(0,r.jsx)(n.li,{children:"\u68c0\u67e5 Browser Cache TTL"}),"\n",(0,r.jsx)(n.li,{children:"\u5f00\u542f\u5f00\u53d1\u6a21\u5f0f\u8c03\u8bd5"}),"\n",(0,r.jsx)(n.li,{children:"\u68c0\u67e5\u6e90\u7ad9 Cache-Control \u5934"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-workers-\u8d85\u65f6",children:"4. Workers \u8d85\u65f6"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u514d\u8d39\u7248\u9650\u5236"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CPU \u65f6\u95f4: 10ms"}),"\n",(0,r.jsx)(n.li,{children:"\u6267\u884c\u65f6\u95f4: 30s"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f18\u5316\u4ee3\u7801\u903b\u8f91"}),"\n",(0,r.jsx)(n.li,{children:"\u5347\u7ea7\u5230\u4ed8\u8d39\u7248"}),"\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528 Durable Objects"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"5-\u90ae\u4ef6\u65e0\u6cd5\u63a5\u6536",children:"5. \u90ae\u4ef6\u65e0\u6cd5\u63a5\u6536"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"MX \u8bb0\u5f55\u662f\u5426\u6b63\u786e"}),"\n",(0,r.jsx)(n.li,{children:"\u76ee\u6807\u90ae\u7bb1\u662f\u5426\u5df2\u9a8c\u8bc1"}),"\n",(0,r.jsx)(n.li,{children:"\u662f\u5426\u88ab\u5783\u573e\u90ae\u4ef6\u8fc7\u6ee4"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6e90",children:"\u53c2\u8003\u8d44\u6e90"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developers.cloudflare.com/",children:"Cloudflare \u5b98\u65b9\u6587\u6863"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dash.cloudflare.com/",children:"Cloudflare Dashboard"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developers.cloudflare.com/workers/examples/",children:"Workers \u793a\u4f8b"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developers.cloudflare.com/pages/",children:"Pages \u6587\u6863"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://blog.cloudflare.com/",children:"Cloudflare Blog"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://community.cloudflare.com/",children:"Cloudflare \u793e\u533a"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}}}]);